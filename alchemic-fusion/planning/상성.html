<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ì•Œì¼€ë¯¹ í“¨ì „: ì›ì†Œ ìƒì„±ê³„ ì¸í¬ê·¸ë˜í”½</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: 'Noto Sans KR', sans-serif;
        background-color: #003b46;
      }

      .element-icon {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 2rem;
        font-weight: 700;
        color: white;
        position: absolute;
        z-index: 10;
        cursor: default;
      }

      .element-wood {
        background-color: #2e7d32;
        border: 3px solid #66bb6a;
      }
      .element-fire {
        background-color: #c62828;
        border: 3px solid #ef5350;
      }
      .element-earth {
        background-color: #8d6e63;
        border: 3px solid #a1887f;
      }
      .element-metal {
        background-color: #616161;
        border: 3px solid #9e9e9e;
      }
      .element-water {
        background-color: #1565c0;
        border: 3px solid #42a5f5;
      }
      .element-wind {
        background-color: #00838f;
        border: 3px solid #26c6da;
      }

      .arrow {
        position: absolute;
        width: 2px;
        z-index: 5;
        transform-origin: top left;
      }

      .arrow::after {
        content: '';
        position: absolute;
        width: 0;
        height: 0;
        border-style: solid;
      }

      .sangsaeng .arrow {
        background-color: #66a5ad;
      }
      .sangsaeng .arrow::after {
        border-width: 8px 5px 0 5px;
        border-color: #66a5ad transparent transparent transparent;
        bottom: -8px;
        left: -4px;
      }

      .sanggeuk .arrow {
        background-color: #ef5350;
      }
      .sanggeuk .arrow::after {
        border-width: 0 5px 8px 5px;
        border-color: transparent transparent #ef5350 transparent;
        top: -8px;
        left: -4px;
      }

      .chart-container {
        position: relative;
        width: 100%;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
        height: 300px;
        max-height: 400px;
      }
      @media (min-width: 768px) {
        .chart-container {
          height: 400px;
        }
      }
    </style>
  </head>
  <body class="text-gray-200">
    <div class="container mx-auto p-4 md:p-8">
      <header class="text-center py-8">
        <h1 class="text-4xl md:text-6xl font-bold text-white tracking-wider">
          ì•Œì¼€ë¯¹ í“¨ì „
        </h1>
        <p class="text-xl md:text-2xl text-[#C4DFE6] mt-2">
          ì›ì†Œ ìƒì„±ê³„ ë¶„ì„ ë³´ê³ ì„œ
        </p>
      </header>

      <main class="space-y-12">
        <section
          id="intro"
          class="text-center p-6 bg-[#07575B]/50 rounded-xl shadow-lg"
        >
          <h2 class="text-3xl font-bold text-white mb-4">
            6ëŒ€ ì›ì†Œ: ì„¸ê³„ì˜ ê·¼ê°„
          </h2>
          <p class="text-lg text-[#C4DFE6] max-w-3xl mx-auto">
            'ì•Œì¼€ë¯¹ í“¨ì „'ì˜ ì„¸ê³„ëŠ” 6ê°œì˜ ì›ì†Œê°€ ì„œë¡œ ë•ê³ (ìƒìƒ), ì œì••í•˜ë©°(ìƒê·¹)
            ê· í˜•ì„ ì´ë£¹ë‹ˆë‹¤. ì´ ì¸í¬ê·¸ë˜í”½ì€ ê° ì›ì†Œì˜ ë…íŠ¹í•œ ì—­í• ê³¼ ë³µì¡í•˜ê²Œ
            ì–½íŒ ìƒì„± ê´€ê³„ë¥¼ ì‹œê°í™”í•˜ì—¬, í”Œë ˆì´ì–´ì™€ ê°œë°œíŒ€ ëª¨ë‘ì—ê²Œ ê¹Šì´ ìˆëŠ”
            ì „ëµì  í†µì°°ë ¥ì„ ì œê³µí•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.
          </p>
        </section>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
          <div
            id="sangsaeng-card"
            class="bg-[#07575B]/50 p-6 rounded-xl shadow-lg"
          >
            <h3 class="text-2xl font-bold text-white mb-4 text-center">
              ğŸ¤ ìƒìƒ(ç›¸ç”Ÿ)ì˜ ìˆœí™˜: ìƒí˜¸ ê°•í™”ì˜ ê³ ë¦¬
            </h3>
            <p class="text-center text-[#C4DFE6] mb-8">
              í•˜ë‚˜ì˜ ì›ì†Œê°€ ë‹¤ìŒ ì›ì†Œì˜ í˜ì„ ì¦í­ì‹œí‚¤ëŠ”, ê¸ì •ì ì´ê³  ìˆœí™˜ì ì¸
              ê´€ê³„ì…ë‹ˆë‹¤. ì´ ê´€ê³„ë¥¼ ì´í•´í•˜ëŠ” ê²ƒì€ ì„±ì¥ì˜ ë™ë ¥ì„ ë§Œë“œëŠ”
              ì²«ê±¸ìŒì…ë‹ˆë‹¤.
            </p>
            <div
              id="sangsaeng-diagram"
              class="relative w-full h-96 md:h-[450px] sangsaeng"
            ></div>
          </div>

          <div
            id="sanggeuk-card"
            class="bg-[#07575B]/50 p-6 rounded-xl shadow-lg"
          >
            <h3 class="text-2xl font-bold text-white mb-4 text-center">
              âš”ï¸ ìƒê·¹(ç›¸å‰‹)ì˜ ë²•ì¹™: í˜ì˜ ê· í˜•ê³¼ ì œì••
            </h3>
            <p class="text-center text-[#C4DFE6] mb-8">
              í•˜ë‚˜ì˜ ì›ì†Œê°€ ë‹¤ë¥¸ ì›ì†Œì˜ í˜ì„ ì•½í™”ì‹œí‚¤ê±°ë‚˜ ì†Œë©¸ì‹œí‚¤ëŠ”, ê²¬ì œì™€
              ê· í˜•ì˜ ê´€ê³„ì…ë‹ˆë‹¤. ì•½ì ì„ íŒŒê³ ë“œëŠ” ì „ëµì˜ í•µì‹¬ì…ë‹ˆë‹¤.
            </p>
            <div
              id="sanggeuk-diagram"
              class="relative w-full h-96 md:h-[450px] sanggeuk"
            ></div>
          </div>
        </div>

        <section
          id="explorer"
          class="bg-[#07575B]/50 p-6 rounded-xl shadow-lg lg:col-span-2"
        >
          <h3 class="text-2xl font-bold text-white mb-4 text-center">
            ğŸ”¬ ì›ì†Œ ê´€ê³„ íƒìƒ‰ê¸°
          </h3>
          <p class="text-center text-[#C4DFE6] mb-8">
            ì•„ë˜ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ íŠ¹ì • ì›ì†Œê°€ ë‹¤ë¥¸ ëª¨ë“  ì›ì†Œì™€ ë§ºê³  ìˆëŠ” ìƒì„±
            ê´€ê³„ë¥¼ í•œëˆˆì— í™•ì¸í•´ ë³´ì„¸ìš”. ê° ì›ì†Œê°€ ê°€ì§„ ê³ ìœ ì˜ ê°•ì ê³¼ ì•½ì ì„
            íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
          </p>
          <div
            class="flex flex-wrap justify-center gap-4 mb-8"
            id="element-buttons"
          ></div>
          <div class="chart-container">
            <canvas id="relationshipRadarChart"></canvas>
          </div>
        </section>

        <section id="summary" class="bg-[#07575B]/50 p-6 rounded-xl shadow-lg">
          <h3 class="text-2xl font-bold text-white mb-4 text-center">
            ğŸ“œ í†µí•© ìƒì„± ìš”ì•½í‘œ
          </h3>
          <p class="text-center text-[#C4DFE6] mb-8">
            ëª¨ë“  ì›ì†Œì˜ ìƒìƒ, ìƒê·¹ ê´€ê³„ë¥¼ ì •ë¦¬í•œ ìµœì¢… ìš”ì•½í‘œì…ë‹ˆë‹¤. ê²Œì„ ì „ëµ
            ìˆ˜ë¦½ ì‹œ ë¹ ë¥¸ ì°¸ê³  ìë£Œë¡œ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
          </p>
          <div class="overflow-x-auto">
            <table class="w-full text-center text-sm md:text-base">
              <thead class="bg-[#003B46]">
                <tr>
                  <th class="p-3">ì›ì†Œ</th>
                  <th class="p-3">ìƒìƒ (í˜ì„ ì¤Œ)</th>
                  <th class="p-3">ìƒìƒ (í˜ì„ ë°›ìŒ)</th>
                  <th class="p-3">ìƒê·¹ (ì œì••í•¨)</th>
                  <th class="p-3">ìƒê·¹ (ì œì••ë‹¹í•¨)</th>
                </tr>
              </thead>
              <tbody class="bg-[#07575B]/70"></tbody>
            </table>
          </div>
        </section>
      </main>
    </div>

    <script>
      const elements = [
        {
          id: 'wood',
          name: 'ë‚˜ë¬´',
          char: 'æœ¨',
          color: '#2E7D32',
          pos: { x: 50, y: 5 },
        },
        {
          id: 'fire',
          name: 'ë¶ˆ',
          char: 'ç«',
          color: '#C62828',
          pos: { x: 95, y: 35 },
        },
        {
          id: 'earth',
          name: 'í™',
          char: 'åœŸ',
          color: '#8D6E63',
          pos: { x: 80, y: 80 },
        },
        {
          id: 'metal',
          name: 'ì‡ ',
          char: 'é‡‘',
          color: '#616161',
          pos: { x: 20, y: 80 },
        },
        {
          id: 'water',
          name: 'ë¬¼',
          char: 'æ°´',
          color: '#1565C0',
          pos: { x: 5, y: 35 },
        },
        {
          id: 'wind',
          name: 'ë°”ëŒ',
          char: 'é¢¨',
          color: '#00838F',
          pos: { x: 50, y: 45 },
        },
      ];

      function drawDiagram(containerId, relationships) {
        const container = document.getElementById(containerId);
        if (!container) return;
        container.innerHTML = '';

        elements.forEach((el) => {
          const elDiv = document.createElement('div');
          elDiv.className = `element-icon element-${el.id}`;
          elDiv.textContent = el.char;
          elDiv.style.left = `calc(${el.pos.x}% - 40px)`;
          elDiv.style.top = `calc(${el.pos.y}% - 40px)`;
          container.appendChild(elDiv);
        });

        relationships.forEach((rel) => {
          const from = elements.find((e) => e.id === rel.from);
          const to = elements.find((e) => e.id === rel.to);
          if (!from || !to) return;

          const fromX = from.pos.x;
          const fromY = from.pos.y;
          const toX = to.pos.x;
          const toY = to.pos.y;

          const angle = (Math.atan2(toY - fromY, toX - fromX) * 180) / Math.PI;
          const distance = Math.sqrt(
            Math.pow(toX - fromX, 2) + Math.pow(toY - fromY, 2)
          );

          const arrow = document.createElement('div');
          arrow.className = 'arrow';
          arrow.style.left = `${fromX}%`;
          arrow.style.top = `${fromY}%`;
          arrow.style.height = `${distance}%`;
          arrow.style.transform = `rotate(${angle + 90}deg)`;

          if (rel.double) {
            const arrow2 = document.createElement('div');
            arrow2.className = 'arrow';
            arrow2.style.left = `${toX}%`;
            arrow2.style.top = `${toY}%`;
            arrow2.style.height = `${distance}%`;
            arrow2.style.transform = `rotate(${angle - 90}deg)`;
            container.appendChild(arrow2);
          }

          container.appendChild(arrow);
        });
      }

      const sangsaengRelationships = [
        { from: 'water', to: 'wood' },
        { from: 'wood', to: 'fire' },
        { from: 'fire', to: 'earth' },
        { from: 'earth', to: 'metal' },
        { from: 'metal', to: 'water' },
        { from: 'wind', to: 'wood' },
      ];

      const sanggeukRelationships = [
        { from: 'water', to: 'fire' },
        { from: 'fire', to: 'metal' },
        { from: 'metal', to: 'wood' },
        { from: 'metal', to: 'wind' },
        { from: 'wood', to: 'earth' },
        { from: 'earth', to: 'wind', double: true },
      ];

      const radarData = {
        wood: { sangsaeng: [0, 1, 0, 0, 0, 1], sanggeuk: [0, 0, 1, 0, 0, 0] },
        fire: { sangsaeng: [0, 0, 1, 0, 0, 0], sanggeuk: [0, 0, 0, 1, 0, 0] },
        earth: { sangsaeng: [0, 0, 0, 1, 0, 0], sanggeuk: [0, 0, 0, 0, 1, 1] },
        metal: { sangsaeng: [0, 0, 0, 0, 1, 0], sanggeuk: [1, 0, 0, 0, 0, 1] },
        water: { sangsaeng: [1, 0, 0, 0, 0, 0], sanggeuk: [0, 1, 0, 0, 0, 0] },
        wind: { sangsaeng: [1, 0, 0, 0, 0, 0], sanggeuk: [0, 0, 1, 0, 0, 0] },
      };

      const radarLabels = ['ë‚˜ë¬´', 'ë¶ˆ', 'í™', 'ì‡ ', 'ë¬¼', 'ë°”ëŒ'];

      let radarChart;
      function createRadarChart(elementId) {
        const ctx = document
          .getElementById('relationshipRadarChart')
          .getContext('2d');
        const data = radarData[elementId];

        if (radarChart) {
          radarChart.data.datasets[0].data = data.sangsaeng;
          radarChart.data.datasets[1].data = data.sanggeuk;
          radarChart.update();
          return;
        }

        radarChart = new Chart(ctx, {
          type: 'radar',
          data: {
            labels: radarLabels,
            datasets: [
              {
                label: 'ìƒìƒ (í˜ì„ ì¤Œ)',
                data: data.sangsaeng,
                backgroundColor: 'rgba(102, 165, 173, 0.4)',
                borderColor: '#66A5AD',
                borderWidth: 2,
                pointBackgroundColor: '#66A5AD',
              },
              {
                label: 'ìƒê·¹ (ì œì••/ì•½í™”)',
                data: data.sanggeuk,
                backgroundColor: 'rgba(239, 83, 80, 0.4)',
                borderColor: '#EF5350',
                borderWidth: 2,
                pointBackgroundColor: '#EF5350',
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              r: {
                angleLines: { color: 'rgba(255, 255, 255, 0.2)' },
                grid: { color: 'rgba(255, 255, 255, 0.2)' },
                pointLabels: {
                  font: { size: 14, weight: 'bold' },
                  color: '#C4DFE6',
                },
                ticks: {
                  display: false,
                  stepSize: 1,
                  max: 1,
                  min: 0,
                },
              },
            },
            plugins: {
              legend: { labels: { color: '#C4DFE6' } },
              tooltip: {
                callbacks: {
                  title: function (tooltipItems) {
                    const item = tooltipItems[0];
                    let label = item.chart.data.labels[item.dataIndex];
                    if (Array.isArray(label)) {
                      return label.join(' ');
                    } else {
                      return label;
                    }
                  },
                },
              },
            },
          },
        });
      }

      const summaryData = [
        {
          element: 'ë‚˜ë¬´',
          gives: 'ë¶ˆ',
          gets: 'ë¬¼, ë°”ëŒ',
          beats: 'í™',
          beaten: 'ì‡ ',
        },
        {
          element: 'ë¶ˆ',
          gives: 'í™, (ë¬¼ê³¼ ì¡°í•©)ë°”ëŒ',
          gets: 'ë‚˜ë¬´',
          beats: 'ì‡ ',
          beaten: 'ë¬¼',
        },
        {
          element: 'í™',
          gives: 'ì‡ ',
          gets: 'ë¶ˆ',
          beats: 'ë¬¼, ë°”ëŒ',
          beaten: 'ë‚˜ë¬´, ë°”ëŒ',
        },
        {
          element: 'ì‡ ',
          gives: 'ë¬¼',
          gets: 'í™',
          beats: 'ë‚˜ë¬´, ë°”ëŒ',
          beaten: 'ë¶ˆ',
        },
        {
          element: 'ë¬¼',
          gives: 'ë‚˜ë¬´, (ë¶ˆê³¼ ì¡°í•©)ë°”ëŒ',
          gets: 'ì‡ ',
          beats: 'ë¶ˆ',
          beaten: 'í™',
        },
        {
          element: 'ë°”ëŒ',
          gives: 'ë‚˜ë¬´',
          gets: '(ë¶ˆ+ë¬¼) ì¡°í•©',
          beats: 'í™',
          beaten: 'ì‡ ',
        },
      ];

      function populateSummaryTable() {
        const tbody = document.querySelector('#summary table tbody');
        summaryData.forEach((item) => {
          const row = `
                    <tr class="border-t border-[#003B46]">
                        <td class="p-3 font-bold">${item.element}</td>
                        <td class="p-3">${item.gives}</td>
                        <td class="p-3">${item.gets}</td>
                        <td class="p-3 text-red-400">${item.beats}</td>
                        <td class="p-3 text-blue-400">${item.beaten}</td>
                    </tr>`;
          tbody.innerHTML += row;
        });
      }

      function setupButtons() {
        const buttonContainer = document.getElementById('element-buttons');
        elements.forEach((el) => {
          const button = document.createElement('button');
          button.textContent = el.name;
          button.className = `p-2 px-4 rounded-lg font-bold transition-all duration-200 element-${el.id} border-2 border-transparent`;
          button.onclick = () => {
            document
              .querySelectorAll('#element-buttons button')
              .forEach((btn) => btn.classList.remove('ring-4', 'ring-white'));
            button.classList.add('ring-4', 'ring-white');
            createRadarChart(el.id);
          };
          buttonContainer.appendChild(button);
        });
      }

      window.onload = () => {
        drawDiagram('sangsaeng-diagram', sangsaengRelationships);
        drawDiagram('sanggeuk-diagram', sanggeukRelationships);
        setupButtons();
        document.querySelector('#element-buttons button').click();
        populateSummaryTable();
      };

      window.onresize = () => {
        drawDiagram('sangsaeng-diagram', sangsaengRelationships);
        drawDiagram('sanggeuk-diagram', sanggeukRelationships);
      };
    </script>
  </body>
</html>
