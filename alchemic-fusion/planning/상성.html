<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>알케믹 퓨전: 원소 상성계 인포그래픽</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: 'Noto Sans KR', sans-serif;
        background-color: #003b46;
      }

      .element-icon {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 2rem;
        font-weight: 700;
        color: white;
        position: absolute;
        z-index: 10;
        cursor: default;
      }

      .element-wood {
        background-color: #2e7d32;
        border: 3px solid #66bb6a;
      }
      .element-fire {
        background-color: #c62828;
        border: 3px solid #ef5350;
      }
      .element-earth {
        background-color: #8d6e63;
        border: 3px solid #a1887f;
      }
      .element-metal {
        background-color: #616161;
        border: 3px solid #9e9e9e;
      }
      .element-water {
        background-color: #1565c0;
        border: 3px solid #42a5f5;
      }
      .element-wind {
        background-color: #00838f;
        border: 3px solid #26c6da;
      }

      .arrow {
        position: absolute;
        width: 2px;
        z-index: 5;
        transform-origin: top left;
      }

      .arrow::after {
        content: '';
        position: absolute;
        width: 0;
        height: 0;
        border-style: solid;
      }

      .sangsaeng .arrow {
        background-color: #66a5ad;
      }
      .sangsaeng .arrow::after {
        border-width: 8px 5px 0 5px;
        border-color: #66a5ad transparent transparent transparent;
        bottom: -8px;
        left: -4px;
      }

      .sanggeuk .arrow {
        background-color: #ef5350;
      }
      .sanggeuk .arrow::after {
        border-width: 0 5px 8px 5px;
        border-color: transparent transparent #ef5350 transparent;
        top: -8px;
        left: -4px;
      }

      .chart-container {
        position: relative;
        width: 100%;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
        height: 300px;
        max-height: 400px;
      }
      @media (min-width: 768px) {
        .chart-container {
          height: 400px;
        }
      }
    </style>
  </head>
  <body class="text-gray-200">
    <div class="container mx-auto p-4 md:p-8">
      <header class="text-center py-8">
        <h1 class="text-4xl md:text-6xl font-bold text-white tracking-wider">
          알케믹 퓨전
        </h1>
        <p class="text-xl md:text-2xl text-[#C4DFE6] mt-2">
          원소 상성계 분석 보고서
        </p>
      </header>

      <main class="space-y-12">
        <section
          id="intro"
          class="text-center p-6 bg-[#07575B]/50 rounded-xl shadow-lg"
        >
          <h2 class="text-3xl font-bold text-white mb-4">
            6대 원소: 세계의 근간
          </h2>
          <p class="text-lg text-[#C4DFE6] max-w-3xl mx-auto">
            '알케믹 퓨전'의 세계는 6개의 원소가 서로 돕고(상생), 제압하며(상극)
            균형을 이룹니다. 이 인포그래픽은 각 원소의 독특한 역할과 복잡하게
            얽힌 상성 관계를 시각화하여, 플레이어와 개발팀 모두에게 깊이 있는
            전략적 통찰력을 제공하는 것을 목표로 합니다.
          </p>
        </section>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
          <div
            id="sangsaeng-card"
            class="bg-[#07575B]/50 p-6 rounded-xl shadow-lg"
          >
            <h3 class="text-2xl font-bold text-white mb-4 text-center">
              🤝 상생(相生)의 순환: 상호 강화의 고리
            </h3>
            <p class="text-center text-[#C4DFE6] mb-8">
              하나의 원소가 다음 원소의 힘을 증폭시키는, 긍정적이고 순환적인
              관계입니다. 이 관계를 이해하는 것은 성장의 동력을 만드는
              첫걸음입니다.
            </p>
            <div
              id="sangsaeng-diagram"
              class="relative w-full h-96 md:h-[450px] sangsaeng"
            ></div>
          </div>

          <div
            id="sanggeuk-card"
            class="bg-[#07575B]/50 p-6 rounded-xl shadow-lg"
          >
            <h3 class="text-2xl font-bold text-white mb-4 text-center">
              ⚔️ 상극(相剋)의 법칙: 힘의 균형과 제압
            </h3>
            <p class="text-center text-[#C4DFE6] mb-8">
              하나의 원소가 다른 원소의 힘을 약화시키거나 소멸시키는, 견제와
              균형의 관계입니다. 약점을 파고드는 전략의 핵심입니다.
            </p>
            <div
              id="sanggeuk-diagram"
              class="relative w-full h-96 md:h-[450px] sanggeuk"
            ></div>
          </div>
        </div>

        <section
          id="explorer"
          class="bg-[#07575B]/50 p-6 rounded-xl shadow-lg lg:col-span-2"
        >
          <h3 class="text-2xl font-bold text-white mb-4 text-center">
            🔬 원소 관계 탐색기
          </h3>
          <p class="text-center text-[#C4DFE6] mb-8">
            아래 버튼을 클릭하여 특정 원소가 다른 모든 원소와 맺고 있는 상성
            관계를 한눈에 확인해 보세요. 각 원소가 가진 고유의 강점과 약점을
            파악할 수 있습니다.
          </p>
          <div
            class="flex flex-wrap justify-center gap-4 mb-8"
            id="element-buttons"
          ></div>
          <div class="chart-container">
            <canvas id="relationshipRadarChart"></canvas>
          </div>
        </section>

        <section id="summary" class="bg-[#07575B]/50 p-6 rounded-xl shadow-lg">
          <h3 class="text-2xl font-bold text-white mb-4 text-center">
            📜 통합 상성 요약표
          </h3>
          <p class="text-center text-[#C4DFE6] mb-8">
            모든 원소의 상생, 상극 관계를 정리한 최종 요약표입니다. 게임 전략
            수립 시 빠른 참고 자료로 활용할 수 있습니다.
          </p>
          <div class="overflow-x-auto">
            <table class="w-full text-center text-sm md:text-base">
              <thead class="bg-[#003B46]">
                <tr>
                  <th class="p-3">원소</th>
                  <th class="p-3">상생 (힘을 줌)</th>
                  <th class="p-3">상생 (힘을 받음)</th>
                  <th class="p-3">상극 (제압함)</th>
                  <th class="p-3">상극 (제압당함)</th>
                </tr>
              </thead>
              <tbody class="bg-[#07575B]/70"></tbody>
            </table>
          </div>
        </section>
      </main>
    </div>

    <script>
      const elements = [
        {
          id: 'wood',
          name: '나무',
          char: '木',
          color: '#2E7D32',
          pos: { x: 50, y: 5 },
        },
        {
          id: 'fire',
          name: '불',
          char: '火',
          color: '#C62828',
          pos: { x: 95, y: 35 },
        },
        {
          id: 'earth',
          name: '흙',
          char: '土',
          color: '#8D6E63',
          pos: { x: 80, y: 80 },
        },
        {
          id: 'metal',
          name: '쇠',
          char: '金',
          color: '#616161',
          pos: { x: 20, y: 80 },
        },
        {
          id: 'water',
          name: '물',
          char: '水',
          color: '#1565C0',
          pos: { x: 5, y: 35 },
        },
        {
          id: 'wind',
          name: '바람',
          char: '風',
          color: '#00838F',
          pos: { x: 50, y: 45 },
        },
      ];

      function drawDiagram(containerId, relationships) {
        const container = document.getElementById(containerId);
        if (!container) return;
        container.innerHTML = '';

        elements.forEach((el) => {
          const elDiv = document.createElement('div');
          elDiv.className = `element-icon element-${el.id}`;
          elDiv.textContent = el.char;
          elDiv.style.left = `calc(${el.pos.x}% - 40px)`;
          elDiv.style.top = `calc(${el.pos.y}% - 40px)`;
          container.appendChild(elDiv);
        });

        relationships.forEach((rel) => {
          const from = elements.find((e) => e.id === rel.from);
          const to = elements.find((e) => e.id === rel.to);
          if (!from || !to) return;

          const fromX = from.pos.x;
          const fromY = from.pos.y;
          const toX = to.pos.x;
          const toY = to.pos.y;

          const angle = (Math.atan2(toY - fromY, toX - fromX) * 180) / Math.PI;
          const distance = Math.sqrt(
            Math.pow(toX - fromX, 2) + Math.pow(toY - fromY, 2)
          );

          const arrow = document.createElement('div');
          arrow.className = 'arrow';
          arrow.style.left = `${fromX}%`;
          arrow.style.top = `${fromY}%`;
          arrow.style.height = `${distance}%`;
          arrow.style.transform = `rotate(${angle + 90}deg)`;

          if (rel.double) {
            const arrow2 = document.createElement('div');
            arrow2.className = 'arrow';
            arrow2.style.left = `${toX}%`;
            arrow2.style.top = `${toY}%`;
            arrow2.style.height = `${distance}%`;
            arrow2.style.transform = `rotate(${angle - 90}deg)`;
            container.appendChild(arrow2);
          }

          container.appendChild(arrow);
        });
      }

      const sangsaengRelationships = [
        { from: 'water', to: 'wood' },
        { from: 'wood', to: 'fire' },
        { from: 'fire', to: 'earth' },
        { from: 'earth', to: 'metal' },
        { from: 'metal', to: 'water' },
        { from: 'wind', to: 'wood' },
      ];

      const sanggeukRelationships = [
        { from: 'water', to: 'fire' },
        { from: 'fire', to: 'metal' },
        { from: 'metal', to: 'wood' },
        { from: 'metal', to: 'wind' },
        { from: 'wood', to: 'earth' },
        { from: 'earth', to: 'wind', double: true },
      ];

      const radarData = {
        wood: { sangsaeng: [0, 1, 0, 0, 0, 1], sanggeuk: [0, 0, 1, 0, 0, 0] },
        fire: { sangsaeng: [0, 0, 1, 0, 0, 0], sanggeuk: [0, 0, 0, 1, 0, 0] },
        earth: { sangsaeng: [0, 0, 0, 1, 0, 0], sanggeuk: [0, 0, 0, 0, 1, 1] },
        metal: { sangsaeng: [0, 0, 0, 0, 1, 0], sanggeuk: [1, 0, 0, 0, 0, 1] },
        water: { sangsaeng: [1, 0, 0, 0, 0, 0], sanggeuk: [0, 1, 0, 0, 0, 0] },
        wind: { sangsaeng: [1, 0, 0, 0, 0, 0], sanggeuk: [0, 0, 1, 0, 0, 0] },
      };

      const radarLabels = ['나무', '불', '흙', '쇠', '물', '바람'];

      let radarChart;
      function createRadarChart(elementId) {
        const ctx = document
          .getElementById('relationshipRadarChart')
          .getContext('2d');
        const data = radarData[elementId];

        if (radarChart) {
          radarChart.data.datasets[0].data = data.sangsaeng;
          radarChart.data.datasets[1].data = data.sanggeuk;
          radarChart.update();
          return;
        }

        radarChart = new Chart(ctx, {
          type: 'radar',
          data: {
            labels: radarLabels,
            datasets: [
              {
                label: '상생 (힘을 줌)',
                data: data.sangsaeng,
                backgroundColor: 'rgba(102, 165, 173, 0.4)',
                borderColor: '#66A5AD',
                borderWidth: 2,
                pointBackgroundColor: '#66A5AD',
              },
              {
                label: '상극 (제압/약화)',
                data: data.sanggeuk,
                backgroundColor: 'rgba(239, 83, 80, 0.4)',
                borderColor: '#EF5350',
                borderWidth: 2,
                pointBackgroundColor: '#EF5350',
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              r: {
                angleLines: { color: 'rgba(255, 255, 255, 0.2)' },
                grid: { color: 'rgba(255, 255, 255, 0.2)' },
                pointLabels: {
                  font: { size: 14, weight: 'bold' },
                  color: '#C4DFE6',
                },
                ticks: {
                  display: false,
                  stepSize: 1,
                  max: 1,
                  min: 0,
                },
              },
            },
            plugins: {
              legend: { labels: { color: '#C4DFE6' } },
              tooltip: {
                callbacks: {
                  title: function (tooltipItems) {
                    const item = tooltipItems[0];
                    let label = item.chart.data.labels[item.dataIndex];
                    if (Array.isArray(label)) {
                      return label.join(' ');
                    } else {
                      return label;
                    }
                  },
                },
              },
            },
          },
        });
      }

      const summaryData = [
        {
          element: '나무',
          gives: '불',
          gets: '물, 바람',
          beats: '흙',
          beaten: '쇠',
        },
        {
          element: '불',
          gives: '흙, (물과 조합)바람',
          gets: '나무',
          beats: '쇠',
          beaten: '물',
        },
        {
          element: '흙',
          gives: '쇠',
          gets: '불',
          beats: '물, 바람',
          beaten: '나무, 바람',
        },
        {
          element: '쇠',
          gives: '물',
          gets: '흙',
          beats: '나무, 바람',
          beaten: '불',
        },
        {
          element: '물',
          gives: '나무, (불과 조합)바람',
          gets: '쇠',
          beats: '불',
          beaten: '흙',
        },
        {
          element: '바람',
          gives: '나무',
          gets: '(불+물) 조합',
          beats: '흙',
          beaten: '쇠',
        },
      ];

      function populateSummaryTable() {
        const tbody = document.querySelector('#summary table tbody');
        summaryData.forEach((item) => {
          const row = `
                    <tr class="border-t border-[#003B46]">
                        <td class="p-3 font-bold">${item.element}</td>
                        <td class="p-3">${item.gives}</td>
                        <td class="p-3">${item.gets}</td>
                        <td class="p-3 text-red-400">${item.beats}</td>
                        <td class="p-3 text-blue-400">${item.beaten}</td>
                    </tr>`;
          tbody.innerHTML += row;
        });
      }

      function setupButtons() {
        const buttonContainer = document.getElementById('element-buttons');
        elements.forEach((el) => {
          const button = document.createElement('button');
          button.textContent = el.name;
          button.className = `p-2 px-4 rounded-lg font-bold transition-all duration-200 element-${el.id} border-2 border-transparent`;
          button.onclick = () => {
            document
              .querySelectorAll('#element-buttons button')
              .forEach((btn) => btn.classList.remove('ring-4', 'ring-white'));
            button.classList.add('ring-4', 'ring-white');
            createRadarChart(el.id);
          };
          buttonContainer.appendChild(button);
        });
      }

      window.onload = () => {
        drawDiagram('sangsaeng-diagram', sangsaengRelationships);
        drawDiagram('sanggeuk-diagram', sanggeukRelationships);
        setupButtons();
        document.querySelector('#element-buttons button').click();
        populateSummaryTable();
      };

      window.onresize = () => {
        drawDiagram('sangsaeng-diagram', sangsaengRelationships);
        drawDiagram('sanggeuk-diagram', sanggeukRelationships);
      };
    </script>
  </body>
</html>
